# Admin管理后台验证指南

## 验证日期
2026-01-26

## 服务验证

### ✅ 后端服务验证
```bash
# 检查端口监听
curl http://localhost:8081/api/counselor/list

# 预期响应
{
  "code": 200,
  "msg": "获取成功",
  "data": [...]
}
```

### ✅ 前端服务验证
- 访问: http://localhost:3000
- 预期: 显示登录页面

---

## 功能验证清单

### 1. 登录功能
**步骤**:
1. 访问 http://localhost:3000
2. 输入用户名: `admin`
3. 输入密码: `admin123`
4. 点击登录按钮

**预期结果**:
- ✅ 登录成功提示
- ✅ 跳转到数据看板页面
- ✅ Token保存到localStorage
- ✅ 获取用户信息和权限成功

### 2. 数据看板
**验证点**:
- [ ] 统计卡片正常显示 (用户数、咨询师数、订单数、营收)
- [ ] 订单趋势图表正常渲染
- [ ] 营收趋势图表正常渲染
- [ ] 订单状态分布饼图正常显示
- [ ] 咨询师排名表格正常显示

### 3. 用户管理
**验证点**:
- [ ] 用户列表正常加载
- [ ] 搜索功能正常
- [ ] 分页功能正常
- [ ] 创建用户功能正常
- [ ] 编辑用户功能正常
- [ ] 删除用户功能正常
- [ ] 重置密码功能正常

### 4. 咨询师管理
**验证点**:
- [ ] 咨询师列表正常加载
- [ ] 咨询师详情正常显示
- [ ] 添加咨询师功能正常
- [ ] 编辑咨询师功能正常
- [ ] 删除咨询师功能正常

### 5. 订单管理
**验证点**:
- [ ] 订单列表正常加载
- [ ] 订单详情正常显示
- [ ] 订单状态更新功能正常
- [ ] 订单统计功能正常

### 6. 聊天管理
**验证点**:
- [ ] 聊天会话列表正常
- [ ] 聊天消息详情正常显示
- [ ] 消息搜索功能正常
- [ ] 聊天统计功能正常

### 7. 角色管理
**验证点**:
- [ ] 角色列表正常加载
- [ ] 创建角色功能正常
- [ ] 编辑角色功能正常
- [ ] 删除角色功能正常
- [ ] 角色权限分配功能正常

### 8. 权限管理
**验证点**:
- [ ] 权限列表正常加载
- [ ] 创建权限功能正常
- [ ] 编辑权限功能正常
- [ ] 删除权限功能正常
- [ ] 权限树形结构正常显示

### 9. 菜单管理
**验证点**:
- [ ] 菜单列表正常加载
- [ ] 创建菜单功能正常
- [ ] 编辑菜单功能正常
- [ ] 删除菜单功能正常
- [ ] 菜单树形结构正常显示

### 10. 提现审核
**验证点**:
- [ ] 待审核提现列表正常
- [ ] 提现详情正常显示
- [ ] 审核通过功能正常
- [ ] 审核拒绝功能正常

### 11. 财务统计
**验证点**:
- [ ] 财务统计卡片正常显示
- [ ] 营收趋势图表正常
- [ ] 按天/月/年筛选功能正常
- [ ] 今日数据统计正常

### 12. 财务报表
**验证点**:
- [ ] 营收报表正常生成
- [ ] 订单报表正常生成
- [ ] 导出功能正常

### 13. 低代码平台
**验证点**:
- [ ] 表单列表正常
- [ ] 创建表单功能正常
- [ ] 表单设计器正常工作
- [ ] 表单数据提交功能正常
- [ ] 页面列表正常
- [ ] 创建页面功能正常
- [ ] 页面设计器正常工作

---

## API接口验证

### 公开接口
```bash
# 管理员登录
POST http://localhost:8081/api/admin/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}

# 预期响应
{
  "code": 200,
  "msg": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "admin",
      "email": "admin@mychat.com",
      "is_admin": true
    }
  }
}
```

### 需要认证的接口
```bash
# 获取管理员信息
GET http://localhost:8081/api/admin/user/info
Authorization: Bearer <token>

# 预期响应
{
  "code": 200,
  "msg": "获取成功",
  "data": {
    "id": 1,
    "username": "admin",
    "email": "admin@mychat.com",
    "is_admin": true
  }
}

# 获取权限列表
GET http://localhost:8081/api/admin/user/permissions
Authorization: Bearer <token>

# 预期响应
{
  "code": 200,
  "msg": "获取成功",
  "data": {
    "permissions": [...],
    "roles": ["admin"]
  }
}
```

---

## 常见问题排查

### 问题1: 登录后跳转失败
**原因**: Token未正确保存
**解决**: 检查浏览器localStorage是否有token

### 问题2: API请求401错误
**原因**: Token过期或无效
**解决**: 清除localStorage,重新登录

### 问题3: 图表不显示
**原因**: echarts未安装或版本不兼容
**解决**: 检查package.json中echarts版本

### 问题4: 菜单不显示
**原因**: 权限未正确获取
**解决**: 检查GetAdminPermissions返回格式

### 问题5: 数据库连接失败
**原因**: MySQL未启动或密码错误
**解决**:
1. 启动MySQL服务
2. 检查db.go中的数据库密码 (默认:123456)
3. 确保数据库mychat已创建

---

## 性能验证

### 前端性能
- [ ] 页面加载时间 < 2秒
- [ ] API响应时间 < 500ms
- [ ] 图表渲染流畅无卡顿
- [ ] 列表滚动流畅

### 后端性能
- [ ] 接口响应时间 < 100ms
- [ ] 数据库查询优化
- [ ] 并发处理正常

---

## 浏览器兼容性

| 浏览器 | 版本 | 兼容性 |
|--------|------|--------|
| Chrome | 90+ | ✅ 完全支持 |
| Firefox | 88+ | ✅ 完全支持 |
| Safari | 14+ | ✅ 完全支持 |
| Edge | 90+ | ✅ 完全支持 |

---

## 安全检查

- [ ] 默认管理员密码已修改
- [ ] HTTPS已配置 (生产环境)
- [ ] CORS已正确配置
- [ ] SQL注入防护已启用
- [ ] XSS防护已启用
- [ ] 敏感信息已加密

---

## 验证完成签名

验证人: ___________

验证日期: ___________

验证结果: ☑️ 通过 / ⚠️ 部分通过 / ❌ 未通过

备注: __________________________________________________

---

**最后更新**: 2026-01-26
